<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="'UTF'-8">
    <title>OCRop</title>
    <link rel="icon" href="images/icon.png">

    <meta property="og:title" content="OCRop"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description"
          content="Optical Character Recognition/Text Extraction: Built For Building Alt Text"/>
    <meta property="og:image" content="images/preview.png">
    <meta property="og:image:alt" content="A selection box in red">

    <link rel="stylesheet" href="style/main.css">

    <script src="src/i18n-data.js"></script>
    <script src="https://unpkg.com/canvas-txt"></script>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>
    <script>
        const isoPageLang = window.navigator.language || DEFAULT_PAGE_LANG
        window.i18n = i18nText[isoPageLang] || i18nText[DEFAULT_PAGE_LANG]
    </script>
    <script type="module">
        const isoExtractionLang = window.navigator.language || DEFAULT_EXTRACTION_LANG_ISO
        const initialExtractionLang = iso639_2ToTesseract[isoExtractionLang] || iso639_2ToTesseract[DEFAULT_EXTRACTION_LANG_ISO]

        const worker = await Tesseract.createWorker();
        await worker.loadLanguage(initialExtractionLang);
        await worker.initialize(initialExtractionLang);

        window.tesseractWorker = worker
    </script>

    <script src="lib/fabric.min.js" defer></script>
    <script src="lib/flexsearch.min.js" defer></script>
    <script src="lib/findBoundaries.js" defer></script>
    <script src="lib/unicode-break.js" defer></script>
    <script src="lib/gen/WordBreakProperty.js" defer></script>

    <script src="index.js" defer></script>
    <script src="src/image-gen.js" defer></script>
    <script src="src/results.js" defer></script>
    <script src="src/i18n.js" defer></script>

</head>
<body>
<div id="controls">
    <div id="left-ctl">
        <div class="dropdown">
            <button id="page-lang-btn" onclick="openDropdown('page-lang-dropdown')" class="drop-btn"></button>
            <div id="page-lang-dropdown" class="dropdown-content">
                <input type="text" placeholder="" id="page-lang-text" aria-label="Page Language"
                       onkeyup="filterPageLangs()" onsubmit="changePageLanguage()">
                <div id="page-lang-options"></div>
            </div>
            <a id="add-translation-link" class="dropdown-option"
               href="https://github.com/alt-text-org/ocrop/issues/new?&template=translation.md&title=%5BTranslation%5D+Language"></a>
        </div>
    </div>
</div>
<div id="right-ctl">
    <button id="extract-bt" onclick="extract()" disabled>Extract Text</button>
    <button id="copy-bt" onclick="copy()" disabled>Copy</button>
</div>
<div id="main">
    <div id="cvs-wrapper">
        <div id="upload-wrapper">
            <div class="upload-area">
                <input type="file" id="upload" accept="image/*"/>
            </div>
            <label id="upload-label">
                Upload File or Paste Image
            </label>
        </div>
        <canvas id="cvs" width="1" height="1"></canvas>
        <p id="explanation">
            Try clicking extract, then manipulate the dashed red box, click extract again and see what changes ðŸ’œ
        </p>
    </div>
    <div id="right-col">
        <div id="result-wrapper">
            <textarea id="result" cols="33" rows="33" aria-label="result"></textarea>
        </div>
        <div id="links">
            <a href="https://social.alt-text.org/@hannah"><img class="link-logo" src="images/masto.svg" alt="Mastodon"></a>
            <a href="https://alt-text.org"><img class="link-logo" src="images/alt-text-org.svg" alt="Alt-Text.org"></a>
            <a href="https://github.com/alt-text-org/ocrop"><img class="link-logo" src="images/github.svg" alt="GitHub"></a>
        </div>
    </div>
</div>
</body>
</html>