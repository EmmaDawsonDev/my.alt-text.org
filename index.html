<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="'UTF'-8">
    <title>Alt Composer</title>
    <link rel="icon" href="images/icon.png">

    <meta property="og:title" content="Alt Composer"/>
    <meta property="og:type" content="website"/>
    <meta property="og:description"
          content="Built For Building Image Descriptions"/>
    <meta property="og:image" content="images/preview.png">
    <meta property="og:image:alt" content="Alt-Text.org, white on a library green">

    <link rel="stylesheet" href="style/main.css">
    <link rel="stylesheet" href="style/descriptions.css">
    <link rel="stylesheet" href="style/dropdowns.css">
    <link rel="stylesheet" href="style/in-flight.css">

    <script src="src/i18n-data.js"></script>
    <script src="https://unpkg.com/canvas-txt"></script>
    <script src='https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js'></script>
    <script>
        window.MyAltTextOrg = {
            dicts: {}
        }
        initI18n()
    </script>
    <script type="module">
        await initOcr()
    </script>

    <script src="lib/fabric.min.js" defer></script>
    <script src="lib/flexsearch.min.js" defer></script>
    <script src="lib/findBoundaries.js" defer></script>
    <script src="lib/unicode-break.js" defer></script>
    <script src="lib/gen/WordBreakProperty.js" defer></script>

    <script src="src/canvas.js" defer></script>
    <script src="src/images.js" defer></script>
    <script src="src/descriptions.js" defer></script>
    <script src="src/i18n.js" defer></script>

</head>
<body>
<div id="overlay" onclick="closeDropdown()"></div>
<div id="main">
    <div id="left-col">
        <div id="controls">
            <div class="dropdown" aria-label="Page language select">
                <button onclick="openDropdown('page-lang-dropdown', 'page-lang-text')"
                        class="drop-btn">
                    <img src="images/dropdown.svg" class="inline-icon" id="magnifying-glass-icon" aria-hidden="true"
                         alt="">
                    <span id="current-page-lang"></span>
                </button>
                <div id="page-lang-dropdown" class="dropdown-content">
                    <div class="search-wrapper rounded-top">
                        <img src="images/dropdown.svg" class="inline-icon" aria-hidden="true" alt="">
                        <input id="page-lang-text" class="search-input" type="text" placeholder=""
                               aria-label="Page Language"
                               onkeyup="filterPageLangs()">
                    </div>
                    <div id="page-lang-options" class="dropdown-options"></div>
                    <a id="add-translation-link" target="_blank" rel="noreferrer noopener"
                       href="https://github.com/alt-text-org/ocrop/issues/new?&template=translation.md&title=%5BTranslation%5D+Language"></a>
                </div>
            </div>
            <button id="extract-btn" onclick="cropExtractAndAddInFlight()" disabled></button>
        </div>
        <div id="cvs-wrapper">
            <div id="upload-wrapper">
                <div class="upload-area">
                    <input type="file" id="upload" accept="image/*"/>
                </div>
                <label id="upload-label"></label>
            </div>
            <canvas id="cvs" width="1" height="1"></canvas>
            <p id="explanation"></p>
        </div>
        <div id="in-flight-wrapper">
            <div id="in-flight"></div>
            <div id="in-flight-controls">
                <button id="save-in-flight" class="emoji-button in-flight-btn" onclick="saveInFlight()">ðŸ’¾</button>
                <button id="discard-in-flight" class="emoji-button in-flight-btn" onclick="discardInFlight()">ðŸš®</button>
            </div>
        </div>
    </div>
    <div id="right-col">
        <div id="result-wrapper">
            <div id="filter-wrapper" class="search-wrapper" onclick="focusFilter()">
                <img src="images/magnifying.svg" class="inline-icon" alt="" aria-hidden="true">
                <input id="filter-input" class="search-input" type="text" placeholder="#" aria-label="Alt Text Search">
            </div>
            <div id="description-wrapper">
                <button>âž•</button>
                <div id="descriptions"></div>
            </div>
            <div id="import-export">
<!--                <button id="import-btn" onclick="exportDescriptions()">PLACEHOLDER TEXT</button>-->
            </div>
        </div>
    </div>
    <div id="links">
        <a href="https://social.alt-text.org/@hannah"><img class="link-logo" src="images/masto.svg" alt="Mastodon"></a>
        <a href="https://alt-text.org"><img class="link-logo" src="images/alt-text-org.svg" alt="Alt-Text.org"></a>
        <a href="https://github.com/alt-text-org/ocrop"><img class="link-logo" src="images/github.svg" alt="GitHub"></a>
    </div>
</div>
<div id="settings" style="visibility: hidden">
    <h1>Settings</h1>
    <div class="setting-section">
        <h3>General</h3>
        <div id="general-controls"></div>
    </div>
    <div class="setting-section">
        <h3>Keyboard Controls</h3>
        <div id="keyboard-controls"></div>
    </div>
</div>
</body>
</html>